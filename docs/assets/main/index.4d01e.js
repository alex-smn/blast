window.__require=function e(t,o,i){function s(r,l){if(!o[r]){if(!t[r]){var a=r.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!l&&u)return u(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var c=o[r]={exports:{}};t[r][0].call(c.exports,function(e){return s(t[r][1][e]||e)},c,c.exports,e,t,o,i)}return o[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<i.length;r++)s(i[r]);return s}({BoosterManager:[function(e,t,o){"use strict";cc._RF.push(t,"13502PVb5xEr6Ndr9Lb5j7o","BoosterManager"),o.__esModule=!0,o.default=void 0;var i=l(e("./GameParameters")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(void 0);if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=i?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}(e("./Booster")),n=l(e("./Field"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}var a=cc.Class({extends:cc.Component,properties:{boosters:{default:[],type:[s.default]},field:{default:null,type:n.default},_teleportTileLocation:{default:null,type:Object}},onClick:function(e){var t=this;this.boosters.forEach(function(o){o.checkLocationIsInBounds(e)&&t._toggle(o)})},performBooster:function(e){var t=this.getSelectedBooster(),o=this.field.getTileIndicesFromCoords(e);if(o){var i=this._onTileClickWithBooster(o.col,o.row,t);return i&&this.deselectBooster(t),i}return!1},getSelectedBooster:function(){return this.boosters.find(function(e){return e.isSelected()})},deselectBooster:function(e){this._resetBoosters(),e.select(!1)},_onTileClickWithBooster:function(e,t,o){if(this.field.isTileMoving(e,t))return!1;switch(o.boosterType){case s.BoosterType.BOMB:return this._performBomb(e,t);case s.BoosterType.TELEPORT:return this._performTeleport(e,t)}},_performBomb:function(e,t){var o=this._getTileNeighboursInRadius(e,t,i.default.bombRadius);return this.field.blastTiles(o),!0},_performTeleport:function(e,t){return null!=this._teleportTileLocation?(this.field.setTileSelected(this._teleportTileLocation.col,this._teleportTileLocation.row,!1),this.field.swapTiles({col:e,row:t},{col:this._teleportTileLocation.col,row:this._teleportTileLocation.row}),this._teleportTileLocation=null,!0):(this._teleportTileLocation={col:e,row:t},this.field.setTileSelected(e,t,!0),!1)},_getTileNeighboursInRadius:function(e,t,o){for(var s=[],n=e-o;n<=e+o;n++)for(var r=t-o;r<=t+o;r++)n>=0&&n<i.default.columns&&r>=0&&r<i.default.rows&&s.push({col:n,row:r});return s},_toggle:function(e){this._resetBoosters();var t=e.isSelected();this.boosters.forEach(function(e){return e.select(!1)}),e.select(!t)},_resetBoosters:function(){null!=this._teleportTileLocation&&(this.field.setTileSelected(this._teleportTileLocation.col,this._teleportTileLocation.row,!1),this._teleportTileLocation=null)}});o.default=a,t.exports=o.default,cc._RF.pop()},{"./Booster":"Booster","./Field":"Field","./GameParameters":"GameParameters"}],Booster:[function(e,t,o){"use strict";cc._RF.push(t,"bb484lVD8ZF+YAUW8UcIGes","Booster"),o.__esModule=!0,o.default=o.BoosterType=o.BoosterPrice=void 0;var i=Object.freeze({BOMB:0,TELEPORT:1});o.BoosterType=i;var s=Object.freeze({BOMB:1e3,TELEPORT:500});o.BoosterPrice=s;var n=cc.Class({extends:cc.Component,properties:{boosterType:i.BOMB,_price:0,frame:{default:null,type:cc.Sprite},priceLabel:{default:null,type:cc.Label},_isEnabled:!1,_isSelected:!1},onLoad:function(){switch(this.boosterType){case i.BOMB:this._price=s.BOMB;break;case i.TELEPORT:this._price=s.TELEPORT}this.priceLabel.string=this._price},checkLocationIsInBounds:function(e){var t=this.node.convertToNodeSpaceAR(e);return t.x>-this.node.width/2&&t.x<this.node.width/2&&t.y>-this.node.height/2&&t.y<this.node.height/2},select:function(e){e!=this._isSelected&&(this._isSelected=e,this.frame.node.active=e)},setIsEnabled:function(e){this.node.opacity=1==e?255:150,this.node.isEnabled=e},isSelected:function(){return this._isSelected},getPrice:function(){return this._price}});o.default=n,cc._RF.pop()},{}],EffectsManager:[function(e,t,o){"use strict";cc._RF.push(t,"7e94933wqFHjrb+kP/Z8VLh","EffectsManager"),o.__esModule=!0,o.default=void 0;var i=cc.Class({extends:cc.Component,properties:{prefabParticleSystem:{default:null,type:cc.Node}},animateBlast:function(e,t){var o=cc.instantiate(this.prefabParticleSystem);o.parent=this.node;var i=o.getComponent(cc.ParticleSystem);i.startColor=t,i.endColor=t,i.endColor.a=0;var s=this.node.convertToNodeSpaceAR(e);o.setPosition(s)}});o.default=i,t.exports=o.default,cc._RF.pop()},{}],EndMenuManager:[function(e,t,o){"use strict";cc._RF.push(t,"8375aja0lNCSKSak5+tg/Oe","EndMenuManager"),o.__esModule=!0,o.default=o.GameResult=void 0;var i=Object.freeze({VICTORY:0,DEFEAT:1});o.GameResult=i;var s=cc.Class({extends:cc.Component,properties:{resultTitle:{default:null,type:cc.Label},playAgainButton:{default:null,type:cc.Button},mainMenuButton:{default:null,type:cc.Button},_gameResult:i.VICTORY},onLoad:function(){cc.systemEvent.on("result-passed",this.handleResultPassed,this)},handleResultPassed:function(e){this._gameResult=e,this.resultTitle.string=e==i.VICTORY?"\u041f\u043e\u0431\u0435\u0434\u0430":"\u041f\u043e\u0440\u0430\u0436\u0435\u043d\u0438\u0435"},onDestroy:function(){cc.systemEvent.off("data-passed",this.handleResultPassed,this)},onPlayAgainButton:function(){cc.director.loadScene("Game")},onMainMenuButton:function(){cc.director.loadScene("StartMenu")}});o.default=s,cc._RF.pop()},{}],FieldColumn:[function(e,t,o){"use strict";cc._RF.push(t,"2a5bd4J7epMBpMsf/aD47cp","FieldColumn"),o.__esModule=!0,o.default=void 0;var i=l(e("./GameParameters")),s=l(e("./TileFabric")),n=l(e("./Tile")),r=l(e("./Supertile"));function l(e){return e&&e.__esModule?e:{default:e}}var a=cc.Class({extends:cc.Component,properties:{_tiles:{default:[],type:[n.default]},tileFabric:{default:null,type:s.default}},startColumn:function(){this._updateTiles()},_updateTiles:function(){for(var e=Math.max.apply(Math,this._tiles.map(function(e){return e.node.position.y})),t=Math.max(i.default.rows*i.default.tileSize.height,e+i.default.tileSize.height),o=0;this._tiles.length<i.default.rows;){var s=this.tileFabric.create();s.parent=this.node,this._tiles.push(s.getComponent(n.default)),s.setPosition(0,t),s.getComponent(n.default).moveDelay=o,t+=i.default.tileSize.height,o+=.1}this.node.width=i.default.tileSize.width,this.node.height=i.default.tileSize.height*this._tiles.length,this._positionTiles()},_positionTiles:function(){this._tiles.forEach(function(e,t){var o=new cc.Vec3(0,t*i.default.tileSize.height);e.moveTo(o)})},getTileColor:function(e){return this._tiles[e].color},getSupertileType:function(e){return this._tiles[e].supertileType},blast:function(e,t,o){var i=this;e.sort(function(e,t){return t-e}),e.forEach(function(e){i._tiles[e].blast(),e===t&&void 0!==o?i._tiles[e]=i._createSupertile(e,o):i._tiles.splice(e,1)}),this._updateTiles()},isTileMoving:function(e){return this._tiles[e].isTileMoving()},getTiles:function(){return this._tiles},setTiles:function(e){var t=this;this._tiles=e,this._tiles.forEach(function(e){var o=e.node.convertToWorldSpaceAR(new cc.Vec3);e.node.parent=t.node;var i=t.node.convertToNodeSpaceAR(o);e.node.position=i}),this._positionTiles()},setTileSelected:function(e,t){this._tiles[e].node.opacity=t?150:255},_createSupertile:function(e,t){var o=this.tileFabric.createSupertile(t);o.parent=this.node;var s=e*i.default.tileSize.height;return o.setPosition(0,s),o.getComponent(r.default)}});o.default=a,t.exports=o.default,cc._RF.pop()},{"./GameParameters":"GameParameters","./Supertile":"Supertile","./Tile":"Tile","./TileFabric":"TileFabric"}],Field:[function(e,t,o){"use strict";cc._RF.push(t,"d220cOY5IFFxq2iab0nXYZR","Field"),o.__esModule=!0,o.default=void 0;var i=n(e("./GameParameters")),s=n(e("./FieldColumn"));function n(e){return e&&e.__esModule?e:{default:e}}var r=cc.Class({extends:cc.Component,properties:{columnPrefab:{default:null,type:cc.Node},_columns:{default:[],type:[s.default]}},onLoad:function(){for(this.node.width=i.default.columns*i.default.tileSize.width,this.node.height=i.default.rows*i.default.tileSize.height,this.node.setPosition(-this.node.width/2,-this.node.height/2);this._columns.length<i.default.columns;){var e=cc.instantiate(this.columnPrefab);e.parent=this.node,this._columns.push(e.getComponent(s.default))}this._columns.forEach(function(e){return e.startColumn()}),this._positionColumns()},getTileIndicesFromCoords:function(e){var t=this.node.convertToNodeSpaceAR(e),o=Math.floor(t.x/i.default.tileSize.width),s=Math.floor(t.y/i.default.tileSize.height);return o>=0&&o<i.default.columns&&s>=0&&s<i.default.rows?{col:o,row:s}:null},getTileColor:function(e,t){return this._columns[e].getTileColor(t)},getSupertileType:function(e,t){return this._columns[e].getSupertileType(t)},hasMovingTiles:function(){for(var e=0;e<i.default.columns;e++)for(var t=0;t<i.default.rows;t++)if(this.isTileMoving(column,t))return!0;return!1},isTileMoving:function(e,t){return this._columns[e].isTileMoving(t)},getTiles:function(){return this._columns.flatMap(function(e){return e.getTiles()})},setTiles:function(e){this._columns.forEach(function(t,o){t.setTiles(e.slice(o*i.default.rows,(o+1)*i.default.rows))})},blastTiles:function(e){this._columns.forEach(function(t,o){var i=e.filter(function(e){return e.col==o});i.length>0&&t.blast(i.map(function(e){return e.row}))})},blastTilesCreatingSupertile:function(e,t,o,i){this._columns.forEach(function(s,n){var r=e.filter(function(e){return e.col==n});if(r.length>0){var l=r.map(function(e){return e.row});n==t?s.blast(l,o,i):s.blast(l)}})},setTileSelected:function(e,t,o){this._columns[e].setTileSelected(t,o)},swapTiles:function(e,t){if(e.col==t.col){var o=this._columns[e.col].getTiles(),i=[o[t.row],o[e.row]];o[e.row]=i[0],o[t.row]=i[1],this._columns[e.col].setTiles(o)}else{var s=this._columns[e.col].getTiles(),n=this._columns[t.col].getTiles(),r=[n[t.row],s[e.row]];s[e.row]=r[0],n[t.row]=r[1],this._columns[e.col].setTiles(s),this._columns[t.col].setTiles(n)}},_positionColumns:function(){this._columns.forEach(function(e,t){e.node.setPosition(t*i.default.tileSize.width,0)})}});o.default=r,t.exports=o.default,cc._RF.pop()},{"./FieldColumn":"FieldColumn","./GameParameters":"GameParameters"}],GameManager:[function(e,t){"use strict";cc._RF.push(t,"5a1a5CxDb5Cy5TkK77c/BoV","GameManager");var o=a(e("./GameParameters")),i=a(e("./EffectsManager")),s=a(e("./ScoreManager")),n=a(e("./GameMechanicsManager")),r=a(e("./BoosterManager")),l=e("./EndMenuManager");function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{effectsManager:{default:null,type:i.default},scoreManager:{default:null,type:s.default},gameMechanicsManager:{default:null,type:n.default},boosterManager:{default:null,type:r.default},fieldBackground:{default:null,type:cc.Node},movesLabel:{default:null,type:cc.Label},_moves:0,_shuffleCount:0},onLoad:function(){this.fieldBackground.width=o.default.columns*o.default.tileSize.width+88,this.fieldBackground.height=o.default.rows*o.default.tileSize.height+88,this._moves=o.default.startMovesCount,this._shuffleCount=o.default.shuffleCount,this.node.on(cc.Node.EventType.TOUCH_START,this.onGridTouch,this),this.effectsManager.node.setPosition(-this.gameMechanicsManager.node.width/8,-this.gameMechanicsManager.node.height/8),this.movesLabel.string=this._moves},start:function(){this._checkBoostersState()},onGridTouch:function(e){var t=e.touch.getLocation();if(this.gameMechanicsManager.checkLocationIsInField(t)){var o=this.boosterManager.getSelectedBooster();o?this.boosterManager.performBooster(t)&&this._updateScore(-o.getPrice()):this.gameMechanicsManager.onClick(t)&&this._updateMoves(),this._checkGameState(),this._checkBoostersState()}else this.boosterManager.onClick(t)},_updateMoves:function(){this._moves--,this.movesLabel.string=this._moves},_updateScore:function(e){this.scoreManager.addScore(e)},_checkGameState:function(){this.scoreManager.getCurrentScore()>=o.default.targetPoints&&this._endGame(l.GameResult.VICTORY),0!=this._moves&&this.gameMechanicsManager.canHavePossibleMoves()||this._endGame(l.GameResult.DEFEAT),this.gameMechanicsManager.hasPossibleMoves()||(0==this._shuffleCount?this._endGame(l.GameResult.DEFEAT):(this._shuffleCount--,this.gameMechanicsManager.requestShuffle()))},_endGame:function(e){cc.director.loadScene("EndMenu",function(){cc.systemEvent.emit("result-passed",e)})},_checkBoostersState:function(){var e=this;this.boosterManager.boosters.forEach(function(t){t.setIsEnabled(e.scoreManager.getCurrentScore()>=t.getPrice())})},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onGridTouch,this)}}),cc._RF.pop()},{"./BoosterManager":"BoosterManager","./EffectsManager":"EffectsManager","./EndMenuManager":"EndMenuManager","./GameMechanicsManager":"GameMechanicsManager","./GameParameters":"GameParameters","./ScoreManager":"ScoreManager"}],GameMechanicsManager:[function(e,t,o){"use strict";cc._RF.push(t,"4738a9DVFRLLbLSXTzs4gke","GameMechanicsManager"),o.__esModule=!0,o.default=void 0;var i=a(e("./GameParameters")),s=a(e("./ScoreManager")),n=a(e("./Field")),r=a(e("./BoosterManager")),l=e("./Supertile");function a(e){return e&&e.__esModule?e:{default:e}}var u=cc.Class({extends:cc.Component,properties:{scoreManager:{default:null,type:s.default},boosterManager:{default:null,type:r.default},field:{default:null,type:n.default},_shuffleRequired:!1},start:function(){this._shuffleIfNeeded()},update:function(){1==this._shuffleRequired&&(this.field.hasMovingTiles()||(this._shuffleRequired=!1,this._shuffle()))},onClick:function(e){var t=this.field.getTileIndicesFromCoords(e);return!!t&&this._onTileClick(t.col,t.row)},checkLocationIsInField:function(e){return null!=this.field.getTileIndicesFromCoords(e)},hasPossibleMoves:function(){for(var e=0;e<i.default.columns;e++)for(var t=0;t<i.default.rows;t++)if(this._getTileNeighboursOfSameColor(e,t,this.field.getTileColor(e,t)).length>=i.default.minTilesToBlast)return!0;return!1},canHavePossibleMoves:function(){for(var e={},t=0;t<i.default.columns;t++)for(var o=0;o<i.default.rows;o++){var s=this.field.getTileColor(t,o);if(e[s]){if(e[s]++,e[s]>=i.default.minTilesToBlast)return!0}else e[s]=1}return!1},requestShuffle:function(){this._shuffleRequired=!0},_onTileClick:function(e,t){if(this.field.isTileMoving(e,t))return!1;if(void 0!==this.field.getSupertileType(e,t)){var o=this.field.getSupertileType(e,t);return this._blastSupertile(e,t,o)}var s=this.field.getTileColor(e,t),n=this._getTileNeighboursOfSameColor(e,t,s);if(n.length>=i.default.minTilesToBlast){var r=this._getSupertileType(n);return null!=r?this.field.blastTilesCreatingSupertile(n,e,t,r):this.field.blastTiles(n),this.scoreManager.onBlast(n.length),!0}return!1},_getSupertileType:function(e){var t;return e.length>=l.SupertilesThreshold.MEGABOMB?t=l.SupertileType.MEGABOMB:e.length===l.SupertilesThreshold.BOMB?t=l.SupertileType.BOMB:e.length===l.SupertilesThreshold.VERTICAL?t=l.SupertileType.VERTICAL:e.length===l.SupertilesThreshold.HORIZONTAL&&(t=l.SupertileType.HORIZONTAL),t},_blastSupertile:function(e,t,o){var i=this,s=this._getSupertileBlastTiles(e,t,o),n=[{col:e,row:t}];return function e(t){t.forEach(function(t){var o=n.some(function(e){return t.col==e.col&&t.row==e.row}),r=i.field.getSupertileType(t.col,t.row);if(null!=r&&!o){n.push({col:t.col,row:t.row});var l=i._getSupertileBlastTiles(t.col,t.row,r).filter(function(e){return!s.some(function(t){return t.col==e.col&&t.row==e.row})});s.push.apply(s,l),e(l)}})}(s),this.field.blastTiles(s),this.scoreManager.onBlast(s.length),!0},_getSupertileBlastTiles:function(e,t,o){var s=[];switch(o){case l.SupertileType.HORIZONTAL:for(var n=0;n<i.default.columns;n++)s.push({col:n,row:t});break;case l.SupertileType.VERTICAL:for(var r=0;r<i.default.rows;r++)s.push({col:e,row:r});break;case l.SupertileType.BOMB:s.push.apply(s,this._getTileNeighboursInRadius(e,t,i.default.bombRadius));break;case l.SupertileType.MEGABOMB:s.push.apply(s,this._getAllTiles())}return s},_getTileNeighboursOfSameColor:function(e,t,o){var i=this,s=[{col:e,row:t}];return function e(t,o,n){i._findTileNeighbours(t,o).forEach(function(t){var o=i.field.getTileColor(t.col,t.row),r=s.some(function(e){return e.col==t.col&&e.row==t.row});o.toRGBValue()!=n.toRGBValue()||r||(s.push(t),e(t.col,t.row,n))})}(e,t,o),s},_getTileNeighboursInRadius:function(e,t,o){for(var s=[],n=e-o;n<=e+o;n++)for(var r=t-o;r<=t+o;r++)n>=0&&n<i.default.columns&&r>=0&&r<i.default.rows&&s.push({col:n,row:r});return s},_getAllTiles:function(){for(var e=[],t=0;t<i.default.columns;t++)for(var o=0;o<i.default.rows;o++)e.push({col:t,row:o});return e},_shuffle:function(){for(var e=this.field.getTiles(),t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),i=[e[o],e[t]];e[t]=i[0],e[o]=i[1]}this.field.setTiles(e),this._shuffleIfNeeded()},_shuffleIfNeeded:function(){this.hasPossibleMoves()||this._shuffle()},_findTileNeighbours:function(e,t){var o=[];return e>0&&o.push({col:e-1,row:t}),e<i.default.columns-1&&o.push({col:e+1,row:t}),t>0&&o.push({col:e,row:t-1}),t<i.default.rows-1&&o.push({col:e,row:t+1}),o}});o.default=u,t.exports=o.default,cc._RF.pop()},{"./BoosterManager":"BoosterManager","./Field":"Field","./GameParameters":"GameParameters","./ScoreManager":"ScoreManager","./Supertile":"Supertile"}],GameParameters:[function(e,t,o){"use strict";cc._RF.push(t,"73ccfiobLJEmKGqqjSCuVmK","GameParameters"),o.__esModule=!0,o.default=void 0;var i=function(){};o.default=i,i.columns=6,i.rows=6,i.colorOptionsAmount=5,i.minTilesToBlast=2,i.shuffleCount=1,i.startMovesCount=40,i.targetPoints=3e4,i.bombRadius=2,i.minColumns=2,i.maxColumns=12,i.minRows=2,i.maxRows=12,i.minColorOptionsAmount=1,i.maxColorOptionsAmount=5,i.tileSize={width:171,height:192},i.tileMoveSpeed=2500,t.exports=o.default,cc._RF.pop()},{}],ScoreManager:[function(e,t,o){"use strict";cc._RF.push(t,"1910dST5DlLU6gBvJPuexKf","ScoreManager"),o.__esModule=!0,o.default=void 0;var i,s=(i=e("./GameParameters"))&&i.__esModule?i:{default:i},n=cc.Class({extends:cc.Component,properties:{scoreLabel:{default:null,type:cc.Label},_score:0},onLoad:function(){this.scoreLabel.string=this._score+" / "+s.default.targetPoints},onBlast:function(e){var t=5*Math.pow(e,2)-15*e+30;this._score+=t,this._updateLabel()},addScore:function(e){this._score+=e,this._updateLabel()},getCurrentScore:function(){return this._score},_updateLabel:function(){this.scoreLabel.string=this._score+" / "+s.default.targetPoints}});o.default=n,t.exports=o.default,cc._RF.pop()},{"./GameParameters":"GameParameters"}],StartMenuManager:[function(e,t,o){"use strict";cc._RF.push(t,"a385bQ9VJBNKJhL/92IUqSj","StartMenuManager"),o.__esModule=!0,o.default=void 0;var i,s=(i=e("./GameParameters"))&&i.__esModule?i:{default:i},n=cc.Class({extends:cc.Component,properties:{startButton:{default:null,type:cc.Button},settingsContainer:{default:null,type:cc.Node},settingsButton:{default:null,type:cc.Button},widthSlider:{default:null,type:cc.Slider},widthValueLabel:{default:null,type:cc.Label},heightSlider:{default:null,type:cc.Slider},heightValueLabel:{default:null,type:cc.Label},colorsSlider:{default:null,type:cc.Slider},colorsValueLabel:{default:null,type:cc.Label},targetPointsEditBox:{default:null,type:cc.EditBox},movesEditBox:{default:null,type:cc.EditBox}},onLoad:function(){this.widthSlider.progress=(s.default.columns-s.default.minColumns)/10,this.widthValueLabel.string=s.default.columns,this.heightSlider.progress=(s.default.rows-s.default.minRows)/10,this.heightValueLabel.string=s.default.rows,this.colorsSlider.progress=(s.default.colorOptionsAmount-s.default.minColorOptionsAmount)/4,this.colorsValueLabel.string=s.default.colorOptionsAmount,this.targetPointsEditBox.placeholderLabel.string=s.default.targetPoints,this.movesEditBox.placeholderLabel.string=s.default.startMovesCount,this._addEventListeners()},onStartButton:function(){cc.director.loadScene("Game")},onSettingsButton:function(){this._showSettings(!0)},onSettingsCloseButton:function(){this._showSettings(!1)},_showSettings:function(e){this.startButton.node.active=!e,this.settingsButton.node.active=!e,this.settingsContainer.active=e},_addEventListeners:function(){var e=this;this.widthSlider.node.on("slide",function(t){var o=Math.round(s.default.minColumns+t.progress*(s.default.maxColumns-s.default.minColumns));e.widthValueLabel.string=o,s.default.columns=o}),this.heightSlider.node.on("slide",function(t){var o=Math.round(s.default.minRows+t.progress*(s.default.maxRows-s.default.minRows));e.heightValueLabel.string=o,s.default.rows=o}),this.colorsSlider.node.on("slide",function(t){var o=Math.round(s.default.minColorOptionsAmount+t.progress*(s.default.maxColorOptionsAmount-s.default.minColorOptionsAmount));e.colorsValueLabel.string=o,s.default.colorOptionsAmount=o}),this.targetPointsEditBox.node.on("editing-did-ended",function(){var t=e.targetPointsEditBox.string;t&&(s.default.targetPoints=t)}),this.movesEditBox.node.on("editing-did-ended",function(){var t=e.movesEditBox.string;t&&(s.default.startMovesCount=t)})},onDestroy:function(){this.widthSlider.node.off("slide"),this.heightSlider.node.off("slide"),this.colorsSlider.node.off("slide"),this.targetPointsEditBox.node.off("editing-did-ended"),this.movesEditBox.node.off("editing-did-ended")}});o.default=n,t.exports=o.default,cc._RF.pop()},{"./GameParameters":"GameParameters"}],Supertile:[function(e,t,o){"use strict";cc._RF.push(t,"85774iOC6JCb4pK30D/+Jdv","Supertile"),o.__esModule=!0,o.default=o.SupertilesThreshold=o.SupertileType=void 0;var i,s=(i=e("./Tile"))&&i.__esModule?i:{default:i},n=Object.freeze({HORIZONTAL:0,VERTICAL:1,BOMB:2,MEGABOMB:3});o.SupertileType=n,o.SupertilesThreshold={HORIZONTAL:4,VERTICAL:5,BOMB:6,MEGABOMB:7};var r=cc.Class({extends:s.default,properties:{supertileType:n.HORIZONTAL}});o.default=r,cc._RF.pop()},{"./Tile":"Tile"}],TileFabric:[function(e,t,o){"use strict";cc._RF.push(t,"ae1c5nP3btGsYCc6oG8GOPC","TileFabric"),o.__esModule=!0,o.default=void 0;var i=r(e("./Tile")),s=r(e("./Supertile")),n=r(e("./GameParameters"));function r(e){return e&&e.__esModule?e:{default:e}}var l=cc.Class({extends:cc.Component,properties:{prefabTiles:{default:[],type:[cc.Node]},prefabSuperTiles:{default:[],type:[cc.Node]}},create:function(){var e=cc.instantiate(this.prefabTiles[Math.floor(Math.random()*Math.min(n.default.colorOptionsAmount,this.prefabTiles.length))]),t=e.getComponent(i.default);return t.sprite=e.getComponent(cc.Sprite),t.color=e.getComponent(i.default).color,e},createSupertile:function(e){var t=cc.instantiate(this.prefabSuperTiles[e]),o=t.getComponent(s.default);return o.sprite=t.getComponent(cc.Sprite),o.supertileType=t.getComponent(s.default).supertileType,t}});o.default=l,t.exports=o.default,cc._RF.pop()},{"./GameParameters":"GameParameters","./Supertile":"Supertile","./Tile":"Tile"}],Tile:[function(e,t,o){"use strict";cc._RF.push(t,"f6847c4IvFJ84ivIJuw7hn6","Tile"),o.__esModule=!0,o.default=void 0;var i=n(e("./GameParameters")),s=n(e("./EffectsManager"));function n(e){return e&&e.__esModule?e:{default:e}}var r=Object.freeze({MOVING:0,BOUNCING_START:1,BOUNCING_FINISH:2,IDLE:3}),l=cc.Class({extends:cc.Component,properties:{sprite:{default:null,type:cc.Sprite},color:cc.Color.TRANSPARENT,effectsManager:{default:null,type:s.default},moveDelay:0,_targetPosition:new cc.Vec3(-1,-1),_moveState:r.IDLE},_moveToTargetPos:function(e){var t=this._targetPosition.sub(this.node.position),o=i.default.tileMoveSpeed*e,s=t.normalize().mul(o);if(o<t.len())this.node.setPosition(this.node.position.add(s));else switch(this.node.setPosition(this._targetPosition),this._moveState){case r.IDLE:break;case r.MOVING:this._moveState=r.IDLE}},update:function(e){this.moveDelay>0?this.moveDelay-=e:this._moveState!=r.IDLE&&this._moveToTargetPos(e)},moveTo:function(e){var t=this._targetPosition.fuzzyEquals(e,.1),o=this.node.position.fuzzyEquals(e,.1);t&&(o||this._moveState!=r.IDLE)||(this._targetPosition=e,this._moveState=r.MOVING)},blast:function(){var e=new cc.Vec3(this.node.width/2,this.node.height/2),t=this.node.convertToWorldSpaceAR(e);this.effectsManager.animateBlast(t,this.color),this.node.destroy()},setInfo:function(){tile.sprite=tileNode.getComponent(cc.Sprite),tile.color=tileNode.getComponent(Tile).color},isTileMoving:function(){return this._moveState!=r.IDLE}});o.default=l,t.exports=o.default,cc._RF.pop()},{"./EffectsManager":"EffectsManager","./GameParameters":"GameParameters"}]},{},["Booster","BoosterManager","EffectsManager","EndMenuManager","Field","FieldColumn","GameManager","GameMechanicsManager","GameParameters","ScoreManager","StartMenuManager","Supertile","Tile","TileFabric"]);